## 模块化


webpack实现的

```js
var my_modules={
  '/src/main':((module,exports,my_require)=>{
    my_require('/src/a.js')

    
  })
}
var my_cache={}
function my_require(moduleId) {
  if(my_cache[moduleId]){
    return my_cache[moduleId].exports
  }
  var module=my_cache[moduleId]={
    exports:{}
  }
  //执行模块
  my_modules[moduleId](module,module.exports,my_require);
  //执行后将模块内部一些变量挂到exports对象上 然后返回这个exports对象
  return module.exports

}
my_require.d=(exports,definition)=>{
  for(var key in definition){
    if(my_require.o(definition,key)&&!my_require.o(exports,key)){
      Object.defineProperty(exports,key,{
        enumerable:true,get:definition[key]
      })
    }
  }
}

my_require.o=(obj,prop)=>{
  return Object.prototype.hasOwnProperty.call(obj,prop)
}

my_require.r=(exports)=>{
  if(typeof Symbol !=='undefined'&&Symbol.toStringTag){
    Object.defineProperty(exports,Symbol.toStringTag,{
      value:'Module'
    })
  }
  Object.defineProperty(exports,'__esModule',{
    value:true
  })
}

var my_export=my_require('/src/main')
```

### UMD
```js
(function(global,factory){
  if(typeof exports==='object'&&typeof module==='object'){
    module.exports=factory()
  }else if(typeof define==='function'&&define.amd){
    define([],factory);
  }else if(typeof exports==='object'){
    exports['name']=factory()
  }else{
    global['name']=factory()
  }
})(
  typeof self !=='undefined'?self:this,
  function(){
    
  }
)
```

更多模块实现 参考 system.js 先记录一下，回来继续研究